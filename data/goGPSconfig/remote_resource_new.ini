#**************************************************************
# SERVER DEFINITION
#**************************************************************
# list of possible server

[SERVER]
cddis = ["cddis.gsfc.nasa.gov" "21"]
aiub = ["ftp.aiub.unibe.ch" "21"]
ign = ["igs.ign.fr" "21"]
jpl = ["igscb.jpl.nasa.gov" "21"]
sopac = ["garner.ucsd.edu" "21"]

#**************************************************************
# LOCATION DEFINITION
#**************************************************************
# list of possible locations

[LOCATION]
gnss = "?{cddis}/gps/products/${WWWW}/"
glo = "?{cddis}/pub/glonass/products/${WWWW}/"
mgex = "?{cddis}/pub/gps/products/mgex/${WWWW}/"
garner = "?{sopac}/archive/garner/products/${WWWW}/"
garner_base = "?{sopac}/archive/garner/products/"

iono = "?{cddis}/gnss/products/ionex/${YYYY}/${DOY}/"

brdc = "?{cddis}/gnss/data/daily/${YYYY}/brdc/"
brdc_mgex = "?{cddis}/pub/gps/data/campaign/mgex/daily/rinex3/${YYYY}/brdm/"

dcb = "?{ign}/pub/igs/products/mgex/dcb/${YYYY}/"
dcb_bk = "?{cddis}/pub/gps/products/mgex/${WWWW}/"
dcb_aiub = "?{aiub}/CODE/${YYYY}/"

#**************************************************************
# ACCEPTED COMPUTATION CENTERS
#**************************************************************

[ CENTERS]
available = ["G@default" "R@igs_glo" "G@igs_gps" "GR@code" "GRECJ@code_mgex"]

# DEFAULT -------------------------------------------------

[c_default]
description = "IGS average solution"
final = "igs_eph_gps_final & ( igs_erp_final | null )  & (igs_clk_30s | igs_clk_5m_final | null)"
final_latency = [288 432]
rapid = "igs_eph_gps_rapid & ( igs_erp_rapid | null ) & (igs_clk_5m_rapid | null)"
rapid_latency = [17 41]
ultra = "ultra_gps_eph & ( ultra_erp | null )"
ultra_latency = [3 9]
iono = "f_code_ionex | f_code_predicted1 | f_code_predicted2 | null"

# IGS -----------------------------------------------------

[c_igs_gps]
description = "IGS average solution"
final = "igs_eph_gps_final & ( igs_erp_final | null )  & (igs_clk_30s | igs_clk_5m_final | null)"
final_latency = [288 432]
rapid = "igs_eph_gps_rapid & ( igs_erp_rapid | null ) & (igs_clk_5m_rapid | null)"
rapid_latency = [17 41]
ultra = "ultra_gps_eph & ( ultra_erp | null )"
ultra_latency = [3 9]

[c_igs_glo]
description = "IGS average solution"
final = "igs_eph_glo_final & ( igs_erp_final | null )  & (igs_clk_30s | igs_clk_5m_final | null)"
final_latency = [288 432]
rapid = "igs_eph_glo_rapid & ( igs_erp_rapid | null ) & (igs_clk_5m_rapid | null)"
rapid_latency = [17 41]

[f_igs_eph_glo_final]
sys = "R"
name = ["R@igl"]
filename = "${CCC}${WWWWD}.sp3"
location = ["glo"]

[f_igs_eph_glo_rapid]
sys = "R"
name = ["R@igv"]
filename = "${CCC}${WWWWD}.sp3"
location = ["glo"]

[f_igs_eph_gps_final]
sys = "G"
name = ["G@igs"]
filename = "${CCC}${WWWWD}.sp3"
location = ["gnss" "garner"]

[f_igs_eph_gps_rapid]
sys = "G"
name = ["G@igr"]
filename = "${CCC}${WWWWD}.sp3"
location = ["gnss" "garner"]

[f_igs_eph_gps_ultra]
sys = "G"
name = ["G@igu"]
filename = "${CCC}${WWWWD}.sp3"
location = ["gnss" "garner"]

[f_igs_clk_30s]
filename = "igs${WWWWD}.clk_30s"
location = ["gnss" "garner"]

[f_igs_clk_5m_final]
filename = "igs${WWWWD}.clk"
location = ["gnss" "garner"]

[f_igs_clk_5m_rapid]
filename = "igr${WWWWD}.clk"
location = ["gnss" "garner"]

[r_igs_erp_final]
filename = ["igs${YY}p${WWWW}.erp" "igs${WWWW}7.erp"]
location = ["garner_base" "gnss"]

[r_igs_erp_rapid]
filename = ["igr${WWWWD}.erp"]
location = ["gnss"]

[r_igs_erp_ultra]
filename = ["igu${WWWWD}_%{6H}.erp"]
location = ["gnss"]

# CODE ----------------------------------------------------

[c_code]
description = "Center for Orbit Determination Europe - 3 day arc"
final = "code_eph & ( code_erp | null )  & (code_clk_05s | code_clk_30s | null)"
final_latency = [168 312]
iono = "f_code_ionex | f_code_predicted1 | f_code_predicted2"
dcb = "code_dcb"

[f_code_eph]
sys = "GR"
name = ["GR@cod"]
filename = "${CCC}${WWWWD}.sp3"
location = ["gnss" "garner"]

[f_code_clk_30s]
filename = "cod${WWWWD}.clk"
location = ["gnss" "garner"]

[f_code_clk_05s]
filename = "cod${WWWWD}.clk_05s"
location = ["gnss" "garner"]

[f_code_erp]
filename = ["cod${YY}p${WWWW}.erp" "code${WWWW}7.erp"]
location = ["garner_base" "gnss"]

[f_code_ionex]
filename = "gbmg${DOY}0.${YY}i"
location = "iono"

[f_code_predicted1]
filename = "c1pg${DOY}0.${YY}i"
location = "iono"

[f_code_predicted2]
filename = "c2pg${DOY}0.${YY}i"
location = "iono"

# CODE MGEX -----------------------------------------------

[c_code_mgex]
description = "Center for Orbit Determination Europe - MGEX"
final = "code_mgex_eph & ( code_mgex_erp | null )  & (code_mgex_clk_30s | null)"
final_latency = [168 312]
iono = "code_ionex | code_predicted1 | code_predicted2"
bias = "f_code_mgex_dcb"

[f_code_mgex_eph]
sys = "GRECJ"
name = ["GRECJ@COD"]
filename = "${CCC}0MGXFIN_${YYYY}${DOY}0000_01D_05M_ORB.SP3"
location = ["mgex"]

[f_code_mgex_clk_30s]
filename = "COD0MGXFIN_${YYYY}${DOY}0000_01D_30S_CLK.CLK"
location = ["mgex"]

[f_code_mgex_erp]
filename = "COD0MGXFIN_${YYYY}${DOY}0000_03D_12H_ERP.ERP"
location = ["mgex"]

[f_code_mgex_dcb]
filename = "COD0MGXFIN_${YYYY}${DOY}0000_01D_01D_OSB.BIA"
location = ["mgex"]

[f_code_mgex_ionex]
filename = "gbmg${DOY}0.${YY}i"
location = "iono"

[f_code_mgex_predicted1]
filename = "c1pg${DOY}0.${YY}i"
location = "iono"

[f_code_mgex_predicted2]
filename = "c2pg${DOY}0.${YY}i"
location = "iono"

















#**************************************************************
# FILE RESOURCES
#**************************************************************
# list of all the kind of files to be downloaded

# FINAL EPHEMERIS -----------------------------------------

[f_final_sp3@GRECJIS]
filename = "${CCC}${WWWWD}.sp3"
loc_number = 2
loc001 = "?{cddis}/pub/gps/products/mgex/${WWWW}/"
loc002 = "?{cddis}/pub/gnss/products/${WWWW}/"

[f_final3_sp3@GRECJIS]
filename = "${CCC}_${YYYY}${DOY}0000_01D_05M_ORB.SP3"
loc_number = 1
loc001 = "?{cddis}/pub/gps/products/mgex/${WWWW}/"

[f_final_eph@GRECJIS]
filename = "${CCC}${WWWWD}.eph"
loc_number = 1
loc001 = "?{cddis}/pub/gnss/products/${WWWW}/"

[f_final_sp3@GR]
filename = "${CCC}${WWWWD}.sp3"
loc_number = 1
loc001 = "?{cddis}/pub/glonass/products/${WWWW}/"

[f_final_sp3@G]
filename = "${CCC}${WWWWD}.sp3"
loc_number = 1
loc001 = "?{cddis}/pub/gps/products/${WWWW}/"

[f_final_sp3@G]
filename = "${CCC}${WWWWD}.sp3"
loc_number = 2
loc001 = "?{cddis}/gps/products/${WWWW}/"
loc002 = "?{sopac}/gps/products/${WWWW}/"

# FINAL EARTH ROTATION PARAMETERS -------------------------

[f_final_erp]
filename = "${CCC}${WWWW}7.erp"
loc_number = 4
loc001 = "?{cddis}/gps/products/${WWWW}/"
loc002 = "?{cddis}/pub/gps/products/mgex/${WWWW}/"
loc003 = "?{cddis}/pub/glonass/products/${WWWW}/"
loc004 = "?{sopac}/gps/products/${WWWW}/"

[f_final3_erp]
filename = "${CCC}_${YYYY}${DOY}0000_03D_12H_ERP.ERP"
loc_number = 1
loc001 = "?{cddis}/pub/gps/products/mgex/${WWWW}/"

# RAPID EPHEMERIS -----------------------------------------

[f_rapid_sp3]
filename = "${CCC}${WWWWD}.sp3"
loc_number = 2
loc001 = "?{cddis}/gps/products/${WWWW}/"
loc002 = "?{sopac}/gps/products/${WWWW}/"

# RAPID EARTH ROTATION PARAMETERS -------------------------

[f_rapid_erp]
filename = "${CCC}${WWWWD}.erp"
loc_number = 2
loc001 = "?{cddis}/gps/products/${WWWW}/"
loc002 = "?{sopac}/gps/products/${WWWW}/"

# ULTRA EPHEMERIS -----------------------------------------

[f_ultra_sp3]
filename = "${CCC}${WWWWD}_${HH}.sp3"
loc_number = 2
loc001 = "?{cddis}/gps/products/${WWWW}/"
loc002 = "?{sopac}/gps/products/${WWWW}/"

# ULTRA EARTH ROTATION PARAMETERS -------------------------

[f_ultra_erp]
filename = "${CCC}${WWWWD}_${HH}.erp"
loc_number = 2
loc001 = "?{cddis}/gps/products/${WWWW}/"
loc002 = "?{sopac}/gps/products/${WWWW}/"

# BROADCAST EPHEMERIS -------------------------------------

[f_brdc_eph@GRECJIS]
filename = "brdm${DOY}0.${YY}p"
loc_number = 1
loc001 = "?{cddis}/pub/gps/data/campaign/mgex/daily/rinex3/${YYYY}/brdm/"

[f_brdc_eph@G]
filename = "brdc${DOY}0.${YY}n"
loc_number = 1
loc001 = "?{cddis}/gnss/data/daily/${YYYY}/brdc/"

[f_brdc_epg@R]
filename = "brdc${DOY}0.${YY}g"
loc_number = 1
loc001 = "?{cddis}/gnss/data/daily/${YYYY}/brdc/"

[f_brdc_epg@E]
filename = "brdc${DOY}0.${YY}l"
loc_number = 1
loc001 = "?{cddis}/gnss/data/daily/${YYYY}/brdc/"

# CLOCK ERRORS --------------------------------------------

[f_clk_05s]
filename = "${CCC}${WWWWD}.clk_05s"
loc_number = 1
loc001 = "?{cddis}/gps/products/${WWWW}/"
loc002 = "?{sopac}/gps/products/${WWWW}/"

[f_clk_30s]
filename = "${CCC}${WWWWD}.clk_30s"
loc_number = 4
loc001 = "?{cddis}/gps/products/${WWWW}/"
loc002 = "?{cddis}/pub/gps/products/mgex/${WWWW}/"
loc003 = "?{cddis}/pub/glonass/products/${WWWW}/"
loc004 = "?{sopac}/gps/products/${WWWW}/"

[f_clk3_30s]
filename = "${CCC}_${YYYY}${DOY}0000_01D_30S_CLK.CLK"
loc_number = 1
loc001 = "?{cddis}/pub/gps/products/mgex/${WWWW}/"

[f_clk]
filename = "${CCC}${WWWWD}.clk"
loc_number = 1
loc001 = "?{cddis}/gps/products/${WWWW}/"
loc002 = "?{sopac}/gps/products/${WWWW}/"

# IONEX ---------------------------------------------------

[f_ionex_final]
filename = "${CCC}${DOY}0.${YY}i"
loc_number = 1
loc001 = "?{cddis}/gnss/products/ionex/${YYYY}/${DOY}/"

[f_ionex_predicted1]
filename = "c1pg${DOY}0.${YY}i"
loc_number = 1
loc001 = "?{cddis}/gnss/products/ionex/${YYYY}/${DOY}/"

[f_ionex_predicted2]
filename = "c2pg${DOY}0.${YY}i"
loc_number = 1
loc001 = "?{cddis}/gnss/products/ionex/${YYYY}/${DOY}/"

# DIFFERENT CODE BIASES -----------------------------------

[f_dcb_snx_daily]
filename = "${CCC}0MGXRAP_${YYYY}${DOY}0000_01D_01D_DCB.BSX"
loc_number = 1
loc001 = "?{ign}/pub/igs/products/mgex/dcb/${YYYY}/"

[f_dcb3_snx_daily]
filename = "${CCC}_${YYYY}${DOY}0000_01D_01D_DCB.BIA"
loc_number = 1
loc001 = "?{cddis}/pub/gps/products/mgex/${WWWW}/"

[f_p1c1_aiub]
filename = "P1C1${YY}${MM}.DCB"
loc_number = 1
loc001 = "?{aiub}/CODE/${YYYY}/"

[f_p1p2_aiub]
filename = "P1P2${YY}${MM}.DCB"
loc_number = 1
loc001 = "?{aiub}/CODE/${YYYY}/"

[f_p2c2_aiub]
filename = "P2C2${YY}${MM}_RINEX.DCB"
loc_number = 1
loc001 = "?{aiub}/CODE/${YYYY}/"

#**************************************************************
# RESOURCE DEFINITION
#**************************************************************
# available combinations

[r_ultra]
resources = "ultra_eph & ( ultra_erp | null )"

[r_rapid]
resources = "rapid_eph & ( rapid_erp | null ) & (clk_30s | clk_05s | clk | null)"

[r_final]
resources = "(final_sp3 | final_eph) & ( final_erp |  null )  & (clk_30s | clk_05s | clk | null)"

[r_broadcast]
resources = "brdc_eph"

[r_iono_final]
resources = "ionex_final"

[r_iono_predicted1]
resources = "ionex_predicted1"

[r_iono_predicted2]
resources = "ionex_predicted2"

[r_iono_broadcast]
resources = "brdc_eph"

[r_dcb]
resources = "dcb_snx_daily | ( (p1c1_aiub & null) & (p1p2_aiub & null) & (p2c2_aiub & null) ) | null"

[r_dcb3]
resources = "dcb3_snx_daily | ( (p1c1_aiub & null) & (p1p2_aiub & null) & (p2c2_aiub & null) ) | null"

#**************************************************************
# ACCEPTED COMPUTATION CENTERS
#**************************************************************

[c_default]
description = "IGS average solution"
final = ["G@igs", "R@igl"]
rapid = ["G@igr", "R@igv"]
ultra = "G@igu"
iono_final = "codg"
iono_predicted1 = "c1pg"
iono_predicted2 = "c2pg"



filename = "igs${WWWWD}.sp3"
loc_number = 2
loc001 = "?{cddis}/pub/gps/products/mgex/${WWWW}/"
loc002 = "?{cddis}/pub/gnss/products/${WWWW}/"

final = ["G@igs","R@igl"]
rapid = ["R@igr","R@igv"]
ultra = "G@igu"

[c_code_mc]
description = "Center for Orbit Determination Europe - 3 day arc"
final = "final3_sp3"
final3_sp3 = "GRECJ@COD0MGXFIN"
dcb = "dcb3"
dcb3 = "COD0MGXFIN"
iono_final = "codg"
iono_predicted1 = "c1pg"
iono_predicted2 = "c2pg"

[c_code]
description = "Center for Orbit Determination Europe - 3 day arc"
final = "GRE@cod"
iono_final = "codg"
iono_predicted1 = "c1pg"
iono_predicted2 = "c2pg"

[c_code1]
description = "Center for Orbit Determination Europe - 1 day arc"
final = "GRE@cof"
iono_final = "codg"
iono_predicted1 = "c1pg"
iono_predicted2 = "c2pg"

[c_esa]
description = "ESOC"
final = "GR@esa"
iono_final = "esag"

[c_nrcan]
description = "Department of Natural Resources - Canada"
iono_final = "emrg"
final = "GR@emx"

[c_cas]
description = "China Academy of Science"
dcb = "CAS"

[c_gfz]
description = "Helmholtz-Zentrum Potsdam – Deutsches GeoForschungsZentrum"
final = "GRECJ@gbm"
rapid = "GRECJ@igr"
ultra = "GRECJ@igu"
iono_final = "GRECJ@gbmg"
